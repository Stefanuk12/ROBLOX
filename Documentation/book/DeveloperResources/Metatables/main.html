<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Metatables - Documentation</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../info.html">Infomation</a></li><li class="chapter-item expanded "><a href="../../Scripts/Games/main.html"><strong aria-hidden="true">1.</strong> Games</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/main.html"><strong aria-hidden="true">1.1.</strong> Kohls Admin House</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/DarkKohlsAPI/DarkKohlsAPI.html"><strong aria-hidden="true">1.1.1.</strong> DarkKohls API</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/DarkKohlsAPI/Admin.html"><strong aria-hidden="true">1.1.1.1.</strong> Admin</a></li></ol></li><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/oofkohlsv2/oofkohlsv2.html"><strong aria-hidden="true">1.1.2.</strong> oofkohls v2</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/oofkohlsv2/Admin.html"><strong aria-hidden="true">1.1.2.1.</strong> Admin</a></li><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/oofkohlsv2/ServerOOF.html"><strong aria-hidden="true">1.1.2.2.</strong> Server OOF</a></li><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/oofkohlsv2/SoundAbuse.html"><strong aria-hidden="true">1.1.2.3.</strong> Sound Abuse</a></li><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/oofkohlsv2/MusicCommands.html"><strong aria-hidden="true">1.1.2.4.</strong> Music Commands</a></li><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/oofkohlsv2/GearGiver.html"><strong aria-hidden="true">1.1.2.5.</strong> Gear Giver</a></li><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/oofkohlsv2/Anti.html"><strong aria-hidden="true">1.1.2.6.</strong> Anti</a></li><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/oofkohlsv2/Control.html"><strong aria-hidden="true">1.1.2.7.</strong> Control</a></li><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/oofkohlsv2/Misc.html"><strong aria-hidden="true">1.1.2.8.</strong> Misc</a></li><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/oofkohlsv2/WLCMDs.html"><strong aria-hidden="true">1.1.2.9.</strong> Whitelist CMDs</a></li></ol></li><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/AudioVisualiser/AudioVisualiser.html"><strong aria-hidden="true">1.1.3.</strong> Audio Visualiser</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/AudioVisualiser/Orbiter.html"><strong aria-hidden="true">1.1.3.1.</strong> Orbiter</a></li><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/AudioVisualiser/OrbiterSettings.html"><strong aria-hidden="true">1.1.3.2.</strong> Orbiter Settings</a></li><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/AudioVisualiser/Toggles.html"><strong aria-hidden="true">1.1.3.3.</strong> Toggles</a></li><li class="chapter-item expanded "><a href="../../Scripts/Games/KohlsAdminHouse/AudioVisualiser/Misc.html"><strong aria-hidden="true">1.1.3.4.</strong> Misc</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../Scripts/Other/main.html"><strong aria-hidden="true">2.</strong> Other</a></li><li class="chapter-item expanded "><a href="../../Scripts/Universal/main.html"><strong aria-hidden="true">3.</strong> Universal</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Scripts/Universal/MusicAPI/main.html"><strong aria-hidden="true">3.1.</strong> Music API</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Scripts/Universal/MusicAPI/Variables.html"><strong aria-hidden="true">3.1.1.</strong> Variables</a></li><li class="chapter-item expanded "><a href="../../Scripts/Universal/MusicAPI/Functions.html"><strong aria-hidden="true">3.1.2.</strong> Functions</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../DeveloperResources/main.html"><strong aria-hidden="true">4.</strong> Developer Resources</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../DeveloperResources/Metatables/main.html" class="active"><strong aria-hidden="true">4.1.</strong> Metatables</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../DeveloperResources/Metatables/Hookingmetamethods.html"><strong aria-hidden="true">4.1.1.</strong> Hooking metamethods</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#metatables" id="metatables">Metatables</a></h1>
<p>Here, I will try to explain how to use metatables, and how to make them, as well as their uses.</p>
<p><strong>NOTE:</strong>
The Synapse X Team have made a better version of this, please check it out at these links:</p>
<p><a href="https://x.synapse.to/docs/development/objects_mts.html">Objects and Metatables</a></p>
<p><a href="https://x.synapse.to/docs/development/newcclosure.html">Importance of Newcclosure</a></p>
<p><a href="https://x.synapse.to/docs/development/metamethod_hook_examples.html">Metamethod Hook Examples</a></p>
<p><strong>Please check those out before reading this!</strong></p>
<h4><a class="header" href="#general-info" id="general-info">General Info</a></h4>
<p>Metatables are a special type of tables where they contain certain metamethods. These metamethods can change how the table handles certain operations. Each metamethod has their own unique set amount of arguments that you can learn. </p>
<h4><a class="header" href="#why-would-we-use-them" id="why-would-we-use-them">Why would we use them?</a></h4>
<p>Metatables are used more often in OOP (Object Oriented Programming) where for example, if you want to add two tables, you cannot simply do that. You will need to make it into a metatable and change how the __add metamethod works. You may use metatables to create a shape like a square. You could allow the ability to add two squares by their areas, for example. </p>
<h4><a class="header" href="#what-are-metamethods" id="what-are-metamethods">What are metamethods?</a></h4>
<p>Metamethods are 'special keys' that perform 'special' actions when they are called. For example, lets say we have a table:</p>
<pre><code class="language-lua">local exampleTable = {
    specialNumber = 1,
}
</code></pre>
<p>and we get the <code>specialNumber</code> from the table and assign it to a variable by doing:</p>
<pre><code class="language-lua">local exampleTable = {
    specialNumber = 1,
}

local specialNumber = exampleTable[&quot;specialNumber&quot;]
</code></pre>
<p>Believe it or not, we have used two metamethod here.</p>
<p>Firtly, we have used __index. __index is called/fired when you access a key in a table. In this example, the key was <code>specialNumber</code>. </p>
<p>Secondly, we have also used __newindex. __newindex is fired when a new index is added to a table or when an index is changed in a table. For example, the new index was <code>specialNumber</code> and the new value is <code>1</code>. Within ___newindex, controls how this value is set. </p>
<p>However, we can edit these metamethods.</p>
<h4><a class="header" href="#editing-metamethodmaking-metatables" id="editing-metamethodmaking-metatables">Editing metamethod/making metatables</a></h4>
<p>We can easily make metatables by using the <code>setmetatable</code> function. It accepts two arguments, both being a table. The first argument is the table you want to convert into a metatable and the second argument is a table including the metamethods you want to modify.</p>
<p>Lets make a simple metatable that returns &quot;Hi&quot; when it gets tostringed.</p>
<p>Firstly, make our table.</p>
<pre><code class="language-lua">local tbl = {}
</code></pre>
<p>Now convert it into a metatable.</p>
<pre><code class="language-lua">local tbl = {}
tbl = setmetatable(tbl, {

})
</code></pre>
<p>As of right now, this does nothing. We need to specify what metamethods we want to modify within the second table. </p>
<pre><code class="language-lua">local tbl = {}
tbl = setmetatable(tbl, {
    __tostring = function()
        return &quot;Hi&quot;
    end
})
</code></pre>
<p>We've created our first metatable. When we tostring the table, it will return &quot;Hi&quot;. For tostring, the return value must be a string. So, lets test it out!</p>
<pre><code class="language-lua">local tbl = {}
tbl = setmetatable(tbl, {
    __tostring = function()
        return &quot;Hi&quot;
    end
})
tostring(tbl) --&gt; Hi
</code></pre>
<p>It works! </p>
<p>It's really not that hard!</p>
<h4><a class="header" href="#identifying-errors" id="identifying-errors">Identifying errors</a></h4>
<p>Now that was simple but when you try to do more things, you may run into some certain errors, most notiably, &quot;C Stack Overflow&quot;. This error is returned when the metamethod is in a constant loop of being called. Try executing this code:</p>
<pre><code class="language-lua">local tbl = {Test = &quot;hello&quot;}
setmetatable(tbl, {
    __index = function(t, k)
        return t[k]
    end
})
print(tbl[1])
</code></pre>
<p>You will get a C Stack Overflow error. This is because __index is fired when you try to get the value of a key from a table and it's using __index to return the correct value but then it needs to use __index again to get the correct value for when __index is called, etc etc. This is very confusing isn't it? Well, it's in a constant loop and it'll this breaks your code. So you usually do not want to use the same metamethod within the same metamethod. In this example, <strong>do not use __index in __index</strong>.</p>
<h4><a class="header" href="#ending" id="ending">Ending</a></h4>
<p>If you wish to check out all of the possible metamethods you can use then you can go to the <a href="http://lua-users.org/wiki/MetatableEvents">lua wiki</a>. Hopefully this introduced you into what metatables and metamethods are. If you have any questions then please ask me on Discord @ Stefanuk12#5820. </p>
<p>Note: ROBLOX does have extra metamethods, for example, __namecall. </p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../DeveloperResources/main.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../DeveloperResources/Metatables/Hookingmetamethods.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../DeveloperResources/main.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../DeveloperResources/Metatables/Hookingmetamethods.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        
        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3000/__livereload");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>
        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
